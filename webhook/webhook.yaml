apiVersion: webhookconfig.keptn.sh/v1beta1
kind: WebhookConfig
metadata:
  name: webhook-configuration
spec:
  webhooks:
    - type: sh.keptn.event.enable-feature.triggered
      requests:
        - url: https://api.github.com/repos/my-keptn-tests/fibonacci/dispatches
          payload: >-
            {"event_type":"enable-feature","client_payload":{"type":"{{.type}}","project":"{{.data.project}}","service":"{{.data.service}}","stage":"{{.data.stage}}","shkeptncontext":"{{.shkeptncontext}}","id":"{{.id}}"}}
          headers:
            - key: Authorization
              value: token {{.env.secret_githubsecret_GITHUBTOKEN}}
          method: POST
      envFrom:
        - name: secret_githubsecret_GITHUBTOKEN
          secretRef:
            name: github-secret
            key: GITHUBTOKEN
      subscriptionID: 2c214186-3a7e-4333-a44d-fa581110ce54
      sendFinished: false
      sendStarted: true
